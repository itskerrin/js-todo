(()=>{const e=document.querySelector("[data-projects]"),t=document.querySelector("[data-new-project]"),n=document.querySelector("[data-new-project-input]"),a=document.querySelector("[data-delete-project-btn]"),o=document.querySelector("[data-project-task-container]"),c=document.querySelector("[data-project-title]"),r=document.querySelector("[data-count]"),d=document.querySelector("[data-tasks]"),l=document.getElementById("task-template"),i=document.querySelector("[data-new-task]"),s=document.querySelector("[data-new-task-input]"),u=document.querySelector("[data-clear-complete-btn]"),m="task.projects",p="task.selectedProjectId";let f=JSON.parse(localStorage.getItem(m))||[],k=localStorage.getItem(p);function S(){g(),y()}function g(){localStorage.setItem(m,JSON.stringify(f)),localStorage.setItem(p,k)}function y(){h(e),f.forEach((t=>{const n=document.createElement("li");n.dataset.projectId=t.id,n.classList.add("list-name"),n.innerText=t.name,t.id===k&&n.classList.add("active-list"),e.appendChild(n)}));const t=f.find((e=>e.id===k));null==k?o.style.display="none":(o.style.display="",c.innerText=t.name,v(t),h(d),function(e){e.tasks.forEach((e=>{const t=document.importNode(l.content,!0),n=t.querySelector("input");n.id=e.id,n.checked=e.complete;const a=t.querySelector("label");a.htmlFor=e.id,a.append(e.name),d.appendChild(t)}))}(t))}function v(e){const t=e.tasks.filter((e=>!e.complete)).length,n=1===t?"task":"tasks";r.innerText=`${t} ${n} to go!`}function h(e){for(;e.firstChild;)e.removeChild(e.firstChild)}e.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(k=e.target.dataset.projectId,S())})),d.addEventListener("click",(e=>{if("input"===e.target.tagName.toLowerCase()){const t=f.find((e=>e.id===k));t.tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,g(),v(t)}})),u.addEventListener("click",(e=>{const t=f.find((e=>e.id===k));t.tasks=t.tasks.filter((e=>!e.complete)),S()})),a.addEventListener("click",(e=>{f=f.filter((e=>e.id!==k)),k=null,S()})),t.addEventListener("submit",(e=>{e.preventDefault();const t=n.value;if(null==t||""===t)return;const a=(o=t,{id:Date.now().toString(),name:o,tasks:[]});var o;n.value=null,f.push(a),S()})),i.addEventListener("submit",(e=>{e.preventDefault();const t=s.value;if(null==t||""===t)return;const n=(a=t,{id:Date.now().toString(),name:a,complete:!1});var a;s.value=null,f.find((e=>e.id===k)).tasks.push(n),S()})),y()})();